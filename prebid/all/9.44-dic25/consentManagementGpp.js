(self.pbjsPMChunk=self.pbjsPMChunk||[]).push([[793],{6345:(e,n,t)=>{var s=t(7873),i=t(1069),a=t(3172),r=t(3272),o=t(6916),p=t(1970),c=t(965),l=t(5555),u=t(3806);let d={};class g{constructor(e,n){this.message=e,this.args=null==n?[]:[n]}}class h{apiVersion="1.1";static INST;static get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.c5;if(null==this.INST){const n=e({apiName:"__gpp",apiArgs:["command","callback","parameter"],mode:c.q4});if(null==n)throw new g("GPP CMP not found");this.INST=new this(n)}return this.INST}#e;#n;#t=[];initialized=!1;constructor(e){this.cmp=e,[this.#e,this.#n]=["resolve","reject"].map((e=>n=>{for(;this.#t.length;)this.#t.pop()[e](n)}))}init(e){const n=this.updateWhenReady(e);return this.initialized||(e.gppVersion!==this.apiVersion&&(0,i.JE)(`Unrecognized GPP CMP version: ${e.apiVersion}. Continuing using GPP API version ${this.apiVersion}...`),this.initialized=!0,this.cmp({command:"addEventListener",callback:(e,n)=>{null==n||n?"error"===e?.pingData?.cmpStatus?this.#n(new g('CMP status is "error"; please check CMP setup',e)):this.isCMPReady(e?.pingData||{})&&["sectionChange","signalStatus"].includes(e?.eventName)&&this.#e(this.updateConsent(e.pingData)):this.#n(new g("Received error response from CMP",e)),null==o.ad.getConsentData()||null==e?.pingData||this.isCMPReady(e.pingData)||o.ad.setConsentData(null)}})),n}refresh(){return this.cmp({command:"ping"}).then(this.init.bind(this))}updateConsent(e){return new l.U9((n=>{if(null==e||(0,i.Im)(e))throw new g("Received empty response from CMP",e);const t=C(e);(0,i.fH)("Retrieved GPP consent from CMP:",t),o.ad.setConsentData(t),n(t)}))}nextUpdate(){const e=(0,l.v6)();return this.#t.push(e),e.promise}updateWhenReady(e){return this.isCMPReady(e)?this.updateConsent(e):this.nextUpdate()}isCMPReady(e){return"ready"===e.signalStatus}}const m={iab:function(){return new l.U9((e=>e(h.get().refresh())))}};function C(e){if(null!=e?.applicableSections&&!Array.isArray(e.applicableSections)||null!=e?.gppString&&!(0,i.O8)(e.gppString)||null!=e?.parsedSections&&!(0,i.Qd)(e.parsedSections))throw new g("CMP returned unexpected value during lookup process.",e);return["usnatv1","uscav1"].forEach((n=>{e?.parsedSections?.[n]&&(0,i.JE)(`Received invalid section from cmp: '${n}'. Some functionality may not work as expected`,e)})),P(e)}function P(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{gppString:e?.gppString,applicableSections:e?.applicableSections||[],parsedSections:e?.parsedSections||{},gppData:e}}const f=(0,u.yq)({namespace:"gpp",displayName:"GPP",consentDataHandler:o.ad,parseConsentData:C,getNullConsent:()=>P(null),cmpHandlers:m});r.$W.getConfig("consentManagement",(e=>function(e){return d=f(e),d.loadConsentData?.()?.catch?.((()=>null))}(e.consentManagement))),p.w.before((function(e,n){return e(n.then((e=>{const n=o.ad.getConsentData();return n&&(Array.isArray(n.applicableSections)&&(0,a.J)(e,"regs.gpp_sid",n.applicableSections),(0,a.J)(e,"regs.gpp",n.gppString)),e})))})),(0,s.E)("consentManagementGpp")}},e=>{e.O(0,[10,109,802,769,139,85],(()=>{return n=6345,e(e.s=n);var n}));e.O()}]);