(self.pbjsPMChunk=self.pbjsPMChunk||[]).push([[775],{1185:(e,t,n)=>{var r=n(7873),i=n(1069),s=n(9115),o=n(2938);const l={BIDDER_CODE:"invibes",BID_ENDPOINT:".videostep.com/Bid/VideoAdContent",BID_SUBDOMAIN:"https://bid",SYNC_ENDPOINT:"https://k.r66net.com/GetUserSync",TIME_TO_LIVE:300,DEFAULT_CURRENCY:"EUR",PREBID_VERSION:13,METHOD:"GET",INVIBES_VENDOR_ID:436,USERID_PROVIDERS:["pubcid","pubProvidedId","uid2","zeotapIdPlus","id5id"],META_TAXONOMY:["networkId","networkName","agencyId","agencyName","advertiserId","advertiserName","advertiserDomains","brandId","brandName","primaryCatId","secondaryCatIds","mediaType"],DISABLE_USER_SYNC:!0},a=(0,o.vM)({bidderCode:l.BIDDER_CODE}),d={code:l.BIDDER_CODE,gvlid:l.INVIBES_VENDOR_ID,isBidRequestValid:function(e){if("object"!=typeof e.params)return!1;if(null==e.params.placementId)return!1;return!0},buildRequests:function(e,t){t=t||{};const n=[],r=[];let s,o,d,u=Date.now();window.invibes=window.invibes||{},window.invibes.placementIds=window.invibes.placementIds||[],0==m&&function(){const{scrollHeight:e}=document.documentElement;if(void 0===c.originalURL)return void(c.originalURL=window.location.href);if(void 0===c.originalScrollHeight)return void(c.originalScrollHeight=e);const t=window.location.href;e>c.originalScrollHeight&&c.originalURL!==t&&(m=!0)}();e.forEach((function(e){e.startTime=(new Date).getTime(),window.invibes.placementIds.includes(e.params.placementId)&&(g=!0),window.invibes.placementIds.push(e.params.placementId),n.push(e.params.placementId),r.push(e.adUnitCode),d=d||e.params.domainId,s=s||e.params.customEndpoint,p=p||e.params.customUserSync,f=e?.params?.disableUserSyncs,o=o||e.userId})),c.optIn=c.optIn||function(e,t){if(c.GdprModuleInstalled=!1,c.UspModuleInstalled=!1,e&&e.vendorData){if(c.GdprModuleInstalled=!0,c.gdpr_consent=function(e){if(e.purpose&&e.purpose.consents&&null!=e.tcString)return e.tcString;return e.consentData}(e.vendorData),!e.vendorData.gdprApplies||e.vendorData.hasGlobalConsent)return N(!0),2;let t=function(e){if(e.purpose&&e.purpose.consents)return e.purpose.consents;if(e.purposeConsents)return e.purposeConsents;return null}(e.vendorData);if(null==t)return 0;let n=function(e){if(e.purpose&&e.purpose.consents)return e.tcfPolicyVersion>=4?11:10;return 5}(e.vendorData);if(!A(t,c.purposes,n))return 0;A(function(e){if(e.purpose&&e.purpose.legitimateInterests)return e.purpose.legitimateInterests;return null}(e.vendorData),c.legitimateInterests,n);let r=l.INVIBES_VENDOR_ID.toString(10),i=function(e){if(e.vendor&&e.vendor.consents)return e.vendor.consents;if(e.vendorConsents)return e.vendorConsents;return null}(e.vendorData),s=!0===function(e){if(e.vendor&&e.vendor.legitimateInterests)return e.vendor.legitimateInterests;return{}}(e.vendorData)[r];return null==i||null==i[r]?4:!1===i[r]&&!1===s?0:2}if(t&&t.length>2&&(c.UspModuleInstalled=!0,"N"==t[2]))return N(!0),2;return N(!1),0}(t.gdprConsent,t.uspConsent),c.visitId=c.visitId||D();const v=function(){let e={};try{let t=a.getDataFromLocalStorage("ivbs");null!=t&&(e=JSON.parse(t))}catch(e){}let t,n=/[\\?&]([^=]+)=([^\\?&#]+)/g;for(;null!=(t=n.exec(window.location.href));)t.index===n.lastIndex&&n.lastIndex++,e[t[1].toLowerCase()]=t[2];return e}();let E=function(e){let t;e&&l.USERID_PROVIDERS.forEach((n=>{e[n]&&(t=t||{},t[n]=e[n])}));return t}(o),C={placementIds:n,adUnitCodes:r,auctionStartTime:u,bidVersion:l.PREBID_VERSION};E&&(C.userId=E);let R={location:y(t),videoAdHtmlId:D(),showFallback:"0"===v.advs,ivbsCampIdsLocal:O("IvbsCampIdsLocal"),bidParamsJson:JSON.stringify(C),capCounts:S(),pcids:Object.keys(c.pushedCids).join(","),vId:c.visitId,width:(0,i.Ot)().innerWidth,height:(0,i.Ot)().innerHeight,oi:c.optIn,kw:w,purposes:c.purposes.toString(),li:c.legitimateInterests.toString(),tc:c.gdpr_consent,uspc:t.uspConsent,isLocalStorageEnabled:a.hasLocalStorage(),preventPageViewEvent:I,isPlacementRefresh:g,isInfiniteScrollPage:m};t.refererInfo&&t.refererInfo.ref&&(R.pageReferrer=t.refererInfo.ref.substring(0,300));let B=c.getCookie("handIid");B&&(R.handIid=B);let M=O("ivbsdid");if(!M){let e=c.getCookie("ivbsdid");if(e)try{let t=JSON.parse(e);M=t.id?t.id:t}catch(e){}}M&&(R.lId=M);const P="videoaddebug,advs,bvci,bvid,istop,trybvid,trybvci".split(",");for(let e in v)if(v.hasOwnProperty(e)){let t=v[e];(P.indexOf(e)>-1||/^vs|^invib/i.test(e))&&(R[e]=t)}let _=function(e,t,n){if(null!=e)return e;if(null!=t)return b(t-1e3);if(n.length>0)for(var r=0;r<n.length;r++){const e=h(n[r]);if(null!=e)return b(e)}return b(1)}(s,d,n);return I=!0,{method:l.METHOD,url:_,data:R,options:{withCredentials:!0},bidRequests:e}},interpretResponse:function(e,t){return function(e,t){if(null==t||0===t.length)return(0,i.fH)("Invibes Adapter - No bids have been requested"),[];if(!e)return(0,i.fH)("Invibes Adapter - Bid response is empty"),[];e=e.body||e,e=e.videoAdContentResult||e,e.ShouldSetLId&&e.LId&&(c.optIn&&c.purposes[0]||!e.PrivacyPolicyRule||!e.TcModel||!e.TcModel.PurposeConsents||(c.optIn=e.PrivacyPolicyRule,c.purposes=e.TcModel.PurposeConsents),function(e,t){if(!c.optIn||!c.purposes[0])return;a.setDataInLocalStorage(e,t)}("ivbsdid",e.LId));if("object"==typeof c.bidResponse){if(!0!==e.MultipositionEnabled)return(0,i.fH)("Invibes Adapter - Bid response already received. Invibes only responds to one bid request per user visit"),[];c.bidResponse.AdPlacements=c.bidResponse.AdPlacements.concat(e.AdPlacements)}else c.bidResponse=e;const n=[];for(let r=0;r<t.length;r++){let s=t[r],o=!0===e.UseAdUnitCode?s.params.placementId+"_"+s.adUnitCode:s.params.placementId;if(c.placementBids.indexOf(o)>-1){(0,i.fH)("Invibes Adapter - Placement was previously bid on "+o);continue}let l=null;if(null!=e.AdPlacements)for(let t=0;t<e.AdPlacements.length;t++){let n=e.AdPlacements[t].BidModel;if(null!=n&&n.PlacementId==o){l=e.AdPlacements[t];break}}else{let t=e.BidModel;null!=t&&t.PlacementId==o&&(l=e)}let a=v(s,l,e.MultipositionEnabled,o);null!==a&&(c.placementBids.push(o),n.push(a))}return n}(e,null!=t?t.bidRequests:null)},getUserSyncs:function(e){if(e.iframeEnabled&&!(null==f||null==f?l.DISABLE_USER_SYNC:f)){return{type:"iframe",url:function(){let e=p||l.SYNC_ENDPOINT;e+="?visitId="+c.visitId,e+="&optIn="+c.optIn;let t=O("ivbsdid");if(!t){let e=c.getCookie("ivbsdid");if(e)try{let n=JSON.parse(e);t=n.id?n.id:n}catch(e){}}t&&(e+="&ivbsdid="+encodeURIComponent(t));return e}()}}}};(0,s.a$)(d);const u=function(){let e=window;try{for(;top!==e;)e.parent.location.href.length&&(e=e.parent)}catch(e){}return e}();let c=u.invibes=u.invibes||{};c.purposes=c.purposes||[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],c.legitimateInterests=c.legitimateInterests||[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],c.placementBids=c.placementBids||[],c.pushedCids=c.pushedCids||{};let p,f,I=!1,m=!1,g=!1;function v(e,t,n,r){if(null===t||null===t.BidModel)return(0,i.fH)("Invibes Adapter - Placement not configured for bidding "+r),null;let s=t.BidModel,o=t.Ads;if(!Array.isArray(o)||o.length<1)return null!=t.AdReason&&(0,i.fH)("Invibes Adapter - No ads "+t.AdReason),(0,i.fH)("Invibes Adapter - No ads available"),null;let a=o[0],d=function(e){let t=[0,0];for(let n=0;n<e.length;n++)e[n][0]*e[n][1]>t[0]*t[1]&&(t=e[n]);return t}(e.sizes);if(!0===n&&Object.keys(c.pushedCids).length>0){if(null!=a.Blcids&&a.Blcids.length>0){if(Object.keys(c.pushedCids).some((function(e){return a.Blcids.indexOf(parseInt(e))>-1})))return(0,i.fH)("Invibes Adapter - Ad blacklists pushed ids"),null}if(Object.keys(c.pushedCids).some((function(e){return c.pushedCids[e].indexOf(a.Cid)>-1})))return(0,i.fH)("Invibes Adapter - Ad is blacklisted"),null}c.pushedCids[a.Cid]=a.Blcids||[];const u=Date.now();return(0,i.fH)("Bid auction started at "+s.AuctionStartTime+" . Invibes registered the bid at "+u+" ; bid request took a total of "+(u-s.AuctionStartTime)+" ms."),{requestId:e.bidId,cpm:a.BidPrice,width:s.Width||d[0],height:s.Height||d[1],creativeId:a.VideoExposedId,currency:s.Currency||l.DEFAULT_CURRENCY,netRevenue:!0,ttl:l.TIME_TO_LIVE,ad:C(s),meta:E(s.Meta)}}function b(e){return e<2?l.BID_SUBDOMAIN+l.BID_ENDPOINT:l.BID_SUBDOMAIN+e+l.BID_ENDPOINT}function h(e){if(null==e)return null;var t=/_ivbs([0-9]+)/g.exec(e);return null!=t&&null!=t[1]?parseInt(t[1]):null}function E(e){var t={};if(null!=e)for(let n=0;n<l.META_TAXONOMY.length;n++)e.hasOwnProperty(l.META_TAXONOMY[n])&&(t[l.META_TAXONOMY[n]]=e[l.META_TAXONOMY[n]]);return t}function D(){return"10000000100040008000100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function y(e){return e.refererInfo.page.substring(0,300)}function C(e){return"<html>\n        <head><script type='text/javascript'>inDapIF=true;<\/script></head>\n          <body style='margin : 0; padding: 0;'>\n          creativeHtml\n          </body>\n        </html>".replace("creativeHtml",e.CreativeHtml)}function O(e){if(!c.GdprModuleInstalled&&!c.UspModuleInstalled||c.optIn&&c.purposes[0])return a.getDataFromLocalStorage(e)||""}function S(){const e="ivvcap";if(!c.optIn||!c.purposes[0])return"";let t=function(){try{return JSON.parse(a.getDataFromLocalStorage(e))||{}}catch(e){return{}}},n=function(){let n=(new Date).getTime(),r=t(),i=!1;Object.keys(r).forEach((function(e){r[e][1]<=n&&(delete r[e],i=!0)})),i&&function(t){a.setDataInLocalStorage(e,JSON.stringify(t))}(r)};return function(){n();let e=t();return Object.keys(e).filter((function(t){return e.hasOwnProperty(t)})).sort().map((function(t){return[t,e[t][0]]}))}().map((function(e){return e.join("=")})).join(",")}function N(e){var t;for(t=0;t<c.purposes.length;++t)c.purposes[t]=e;for(t=0;t<c.legitimateInterests.length;++t)c.legitimateInterests[t]=e}function A(e,t,n){if(e instanceof Array){for(let r=0;r<n&&r<e.length;r++)t[r]=!(!1===e[r]||"false"===e[r]||null==e[r]);return!0}if("object"==typeof e&&null!==e){let r=0;for(let i in e){if(r===n)break;if(e.hasOwnProperty(i)){let n=parseInt(i);isNaN(n)?t[r]=!(!1===e[i]||"false"===e[i]||null==e[i]):t[n-1]=!(!1===e[i]||"false"===e[i]||null==e[i]),r++}}return!0}return!1}c.Uid={generate:function(){let e=parseInt("zzzzzz",36),t=function(){return Math.floor(Math.random()*e).toString(36)};return t()+t()}},c.getCookie=function(e){if(a.cookiesAreEnabled()&&(!c.GdprModuleInstalled&&!c.UspModuleInstalled||c.optIn&&c.purposes[0]))return a.getCookie(e)};let w=function(){const e=300;let t=document.getElementsByTagName("head")[0],n=t?t.getElementsByTagName("meta"):[];function r(e,t){let n=e.replace(/[<>~|\\"`!@#$%^&*()=+?]/g,"");let r=n.split(/[\s,;.:]+/).filter((function(e,t,n){return""!==e&&n.indexOf(e)===t}));n="";for(let e=0;e<r.length;e++){if(n+=r[e],n.length>=t)return n;e<r.length-1&&(n+=",")}return n}function i(e,t,i){e=e||"keywords",t=t||100;let s=i=i||"";for(let o=0;o<n.length;o++){if(n[o].name&&n[o].name.toLowerCase()===e.toLowerCase()){return r(i+","+n[o].content||"",t)}n[o].name&&n[o].name.toLowerCase().indexOf(e.toLowerCase())>-1&&(s=i+","+n[o].content||"")}return r(s,t)}let s=i("keywords",e);return(!s||s.length<292)&&(s=i("description",e,s),(!s||s.length<292)&&(s=function(e,n){return e=e||300,r((n=n||"")+","+((document.title||t)&&t.getElementsByTagName("title")[0]?t.getElementsByTagName("title")[0].innerHTML:""),e)}(e,s))),s}();(0,r.E)("invibesBidAdapter")}},e=>{e.O(0,[802,769,139,85],(()=>{return t=1185,e(e.s=t);var t}));e.O()}]);