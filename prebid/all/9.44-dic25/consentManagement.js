(self.pbjsPMChunk=self.pbjsPMChunk||[]).push([[10],{3806:(t,n,e)=>{e.d(n,{yq:()=>c});var o=e(6894),a=e(1069),s=e(7873),i=e(5555),r=e(2604);function c(){let t,n,e,{namespace:c,displayName:u,consentDataHandler:l,parseConsentData:m,getNullConsent:d,cmpHandlers:f,DEFAULT_CMP:g="iab",DEFAULT_CONSENT_TIMEOUT:p=1e4}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function C(t){return`consentManagement.${c} ${t}`}function D(t,n){return t(Object.assign({[`${c}Consent`]:l.getConsentData()},n))}function h(){return n().then((t=>{let{error:n}=t;return{error:n,consentData:l.getConsentData()}}))}function T(){null==t&&(t=function(t,n){const e=new WeakSet;return(0,o.Ak)(t,(function(t,o){return n().then((n=>{let{consentData:s,error:i}=n;!i||s&&e.has(i)||(e.add(i),(0,a.JE)(i.message,...i.args||[])),t.call(this,o)})).catch((n=>{(0,a.vV)(`${n?.message} Canceling auction as per consentManagement config.`,...n?.args||[]),t.stopTiming(),"function"==typeof o.bidsBackHandler?o.bidsBackHandler():(0,a.vV)("Error executing bidsBackHandler")}))}))}(c,(()=>n())),(0,s.m)().requestBids.before(t,50),r.U3.before(D),(0,a.fH)(`${u} consentManagement module has been activated...`))}return function(o){if(o=o?.[c],!o||"object"!=typeof o)return(0,a.JE)(C("config not defined, exiting consent manager module")),null!=t&&((0,s.m)().requestBids.getHooks({hook:t}).remove(),r.U3.getHooks({hook:D}).remove(),t=null),{};let b,k;(0,a.O8)(o.cmpApi)?b=o.cmpApi:(b=g,(0,a.fH)(C(`config did not specify cmp.  Using system default setting (${g}).`))),(0,a.Et)(o.timeout)?k=o.timeout:(k=p,(0,a.fH)(C(`config did not specify timeout.  Using system default setting (${p}).`)));const H=(0,a.Et)(o.actionTimeout)?o.actionTimeout:null;let w;"static"===b?(0,a.Qd)(o.consentData)?(e=o.consentData,k=null,w=()=>new i.U9((t=>t(l.setConsentData(m(e)))))):(0,a.vV)(C("config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")):f.hasOwnProperty(b)?w=f[b]:(l.setConsentData(null),(0,a.JE)(`${u} CMP framework (${b}) is not a supported framework.  Aborting consentManagement module and resuming auction.`),w=()=>i.U9.resolve());const y=()=>function(t){let n,{name:e,consentDataHandler:o,setupCmp:a,cmpTimeout:s,actionTimeout:i,getNullConsent:r}=t;return o.enable(),new Promise(((t,c)=>{let u,l=!1;function m(a){null!=n&&clearTimeout(n),n=null!=a?setTimeout((()=>{const n=o.getConsentData()??(l?u:r()),a="timeout waiting for "+(l?"user action on CMP":"CMP to load");o.setConsentData(n),t({consentData:n,error:new Error(`${e} ${a}`)})}),a):null}a((function(t){u=t,l||(l=!0,null!=i&&m(i))})).then((()=>t({consentData:o.getConsentData()})),c),null!=s&&m(s)})).finally((()=>{n&&clearTimeout(n)})).catch((t=>{throw o.setConsentData(null),t}))}({name:u,consentDataHandler:l,setupCmp:w,cmpTimeout:k,actionTimeout:H,getNullConsent:d});return n=(()=>{let t;return function(){return null==t&&(t=y().catch((n=>{throw t=null,n}))),t}})(),T(),{cmpHandler:b,cmpTimeout:k,actionTimeout:H,staticConsentData:e,loadConsentData:h,requestBidsHook:t}}}}}]);