(self.pbjsPMChunk=self.pbjsPMChunk||[]).push([[601],{2855:(t,e,a)=>{var n=a(7873),s=a(5569),i=a(1445),o=a(1580),d=a(9214),r=a(2938),c=a(1069),g=a(433),u=a(3172),l=a(3978),m=a(1252),p=a(4278);const f="adagio",h="https://script.4dex.io/a/latest/adagio.js",b="code",w="gpid",v=(0,r.vM)({moduleType:s.zu,moduleName:f}),{logError:y,logWarn:x}=(0,c.h0)("AdagioRtdProvider:"),A=new Set,S=function(){const t={session:{}};return{init:()=>{v.getDataFromLocalStorage("adagio",(e=>{const{rnd:a,vwSmplg:n,vwSmplgNxt:s,expiry:i,lastActivityTime:o,id:d,pages:r,testName:g,testVersion:u}=N.getSessionFromLocalStorage(e),l=(t=>!(0,c.Et)(t)||Date.now()>t)(i),m=N.getAbTestFromLocalStorage(e),p=m?2:void 0;if(t.session={rnd:a,pages:r||1,new:l,...void 0!==p&&{v:p},...void 0!==n&&{vwSmplg:n},...void 0!==s&&{vwSmplgNxt:s},...void 0!==i&&{expiry:i},...void 0!==o&&{lastActivityTime:o},...void 0!==d&&{id:d}},l&&(t.session.new=!0,t.session.id=(0,c.lk)(),t.session.rnd=Math.random()),2===p){const{testName:e,testVersion:a,expiry:n,sessionId:s}=m;n&&n>Date.now()&&(!s||s===t.session.id)&&e&&a&&(t.session.testName=e,t.session.testVersion=a)}else g&&u&&(t.session.testName=g,t.session.testVersion=u);N.getAdagioNs().queue.push({action:"session",ts:Date.now(),data:{session:{...t.session}}})}))},get:function(){return t.session}}}(),I=function(){const t={initialized:!1,data:{}};return{reset:function(){t.initialized=!1,t.data={}},get:function(){const e=(0,l.h)();return t.initialized||(t.data={page_dimensions:q().toString(),viewport_dimensions:D().toString(),user_timestamp:(Math.floor((new Date).getTime()/1e3)-60*(new Date).getTimezoneOffset()).toString(),dom_loading:(0,c.tf)(e).toString()},t.initialized=!0),{...t.data}}}}(),N={getAdagioNs:function(){return l.B},getSession:function(){return S},getFeatures:function(){return I},getGuard:function(){return A},isAdagioBidder:function(t){return!!t&&(t+i.Ay.aliasRegistry[t]).toLowerCase().includes("adagio")},getSessionFromLocalStorage:function(t){const e={new:!0,rnd:Math.random()},a=this.getObjFromStorageValue(t);return a&&a.session?a.session:e},getAbTestFromLocalStorage:function(t){const e=this.getObjFromStorageValue(t);return e&&e.abTest?e.abTest:null},getObjFromStorageValue:function(t){return JSON.parse(t,(function(t,e){if("_"!==t.charAt(0)||""===t)return e}))}};const T={name:f,gvlid:617,init:function(t,e){return(0,c.O8)(t.params?.organizationId)&&(0,c.O8)(t.params?.site)?(N.getAdagioNs().hasRtd=!0,N.getSession().init(),function(t){const e=new Set(["impressionViewable","slotRenderEnded","slotVisibilityChanged"]),a=new Set(["noad","setHeaderBiddingWinner"]),n=new Set(["adLoaded"]),s=(0,c.l4)();Array.isArray(N.getAdagioNs().windows)||(N.getAdagioNs().windows=[]);let i=N.getAdagioNs().windows.find((t=>t.self===s));i||(i={self:s},N.getAdagioNs().windows.push(i));const o=(t,e,a,n,i)=>{try{if(a.adserver===n)return;s[t]=s[t]||{},s[t][e]=s[t][e]||[],i()}catch(t){y(t)}};o("googletag","cmd",s,"gpt",(()=>{s.googletag.cmd.push((()=>{e.forEach((t=>{s.googletag.pubads().addEventListener(t,(e=>{N.getAdagioNs().queue.push({action:"gpt-event",data:{eventName:t,args:e,_window:s},ts:Date.now()})}))})),i.adserver="gpt"}))})),o("sas","cmd",s,"sas",(()=>{s.sas.cmd.push((()=>{a.forEach((t=>{s.sas.events.on(t,(e=>{N.getAdagioNs().queue.push({action:"sas-event",data:{eventName:t,args:e,_window:s},ts:Date.now()})}))})),i.adserver="sas"}))})),o("apntag","anq",s,"ast",(()=>{s.apntag.anq.push((()=>{n.forEach((t=>{s.apntag.onEvent(t,(function(){N.getAdagioNs().queue.push({action:"ast-event",data:{eventName:t,args:arguments,_window:s},ts:Date.now()})}))})),i.adserver="ast"}))}))}(),function(t){v.localStorageIsEnabled((e=>{e&&(0,o.R)(h,s.zu,f,void 0,void 0,{id:`adagiojs-${(0,c.s0)()}`,"data-pid":t.params.organizationId})}))}(t),!0):(y("organizationId is required and must be a string."),!1)},getBidRequestData:function(t,e,a){const s=(0,g.A)(a,"params",{}),{site:i}=t.ortb2Fragments.global,o=N.getFeatures().get(),d={uid:(0,c.lk)(),pageviewId:l.B.pageviewId,features:{...o},session:{...S.get()}};(0,u.J)(i,"ext.data.adg_rtd",d),(t.adUnits||(0,n.m)().adUnits||[]).forEach((t=>{t.ortb2Imp=t.ortb2Imp||{};const e=(0,g.A)(t,"ortb2Imp");let a=(0,g.A)(e,"ext.data.divId");a||(a=(0,m.p)(t.code).divId,(0,u.J)(e,"ext.data.divId",a||t.code));const n=function(t){if(!(0,c.Jw)()&&!(0,c.av)())return"";const e={x:0,y:0};if((0,c.Jw)()){const{self:t}=(0,c.xV)()||{};if(!t)return"";e.x=Math.round(t.t),e.y=Math.round(t.l)}else try{const a=(0,c.mb)(),n=a.document;let s;if(!0===(0,c.al)()){const e=(0,c.l4)();s=E(e.document.getElementById(t),e)}else s=a.document.getElementById(t);if(!s)return"";let i=(0,p.G)(s);const o=(0,c.Ot)(),d=n.body,r=n.clientTop||d.clientTop||0,g=n.clientLeft||d.clientLeft||0,u=a.pageYOffset||o.document.documentElement.scrollTop||o.document.body.scrollTop,l=a.pageXOffset||o.document.documentElement.scrollLeft||o.document.body.scrollLeft,m=a.getComputedStyle(s,null);"none"===m.display&&x("The element is hidden. The slot position cannot be computed."),e.x=Math.round(i.left+l-g),e.y=Math.round(i.top+u-r)}catch(t){return y(t),""}return`${e.x}x${e.y}`}(a);if((0,u.J)(e,"ext.data.adg_rtd.adunit_position",n),!(0,g.A)(e,"ext.data.placement")){const{placementSource:a=""}=s;switch(a.toLowerCase()){case b:(0,u.J)(e,"ext.data.placement",t.code);break;case w:(0,u.J)(e,"ext.data.placement",(0,g.A)(e,"ext.gpid"));break;default:x("`ortb2Imp.ext.data.placement` is missing and `params.definePlacement` is not set in the config.")}}const o=t.bids.find((t=>N.isAdagioBidder(t.bidder)));if(o){let t=!1;!(0,g.A)(i,"ext.data.pagetype")&&o.params.pagetype&&((0,u.J)(i,"ext.data.pagetype",o.params.pagetype),t=!0),!(0,g.A)(i,"ext.data.category")&&o.params.category&&((0,u.J)(i,"ext.data.category",o.params.category),t=!0);let a=!1;(0,g.A)(e,"ext.data.placement")||o.params.placement&&((0,u.J)(e,"ext.data.placement",o.params.placement),a=!0),t&&x("`pagetype` and `category` must be defined in the FPD `ortb2.site.ext.data` object. Relying on `adUnits[].bids.adagio.params` is deprecated."),a&&x("`placement` must be defined in the FPD `adUnits[].ortb2Imp.ext.data` object. Relying on `adUnits[].bids.adagio.params` is deprecated.")}})),e()},onBidRequestEvent:function(t,e,a){setTimeout((()=>{t.bids.forEach((t=>{const a=(0,g.A)(t,"ortb2.site.ext.data.adg_rtd.uid");if(!a)return void y("The `uid` is required to store the request in the ADAGIO namespace.");const s=`${t.adUnitCode}-${a}`;N.getGuard().has(s)||(N.getGuard().add(s),function(t,e){try{const{bidder:a,adUnitCode:s,mediaTypes:i,params:o,auctionId:d,bidderRequestsCount:r,ortb2:c,ortb2Imp:u}=t,{organizationId:l,site:m}=e.params,p=(0,g.A)(c,"site.ext.data",{}),f={bidder:a,adUnitCode:s,mediaTypes:i,params:o,auctionId:d,bidderRequestsCount:r,ortb2:p,ortb2Imp:(0,g.A)(u,"ext.data",{}),localPbjs:"pbjsPM",localPbjsRef:(0,n.m)(),organizationId:l,site:m};N.getAdagioNs().queue.push({action:"store",ts:Date.now(),data:f})}catch(t){y(t)}}(t,e))}))}),1)}};function E(t,e){try{if((0,c.mb)()===e)return t.getAttribute("id")||t.setAttribute("id",`adg-${(0,c.s0)()}`),t;{const a=e.frameElement,n=(0,p.G)(a),s=(0,p.G)(t);return n.width===s.width&&n.height===s.height&&E(a,e.parent)}}catch(t){return x(t),!1}}function q(){if((0,c.Jw)()||!(0,c.av)())return"";const t=(0,c.mb)(),e=t.document.querySelector("body");if(!e)return"";const a=t.document.documentElement;return`${Math.max(e.scrollWidth,e.offsetWidth,a.clientWidth,a.scrollWidth,a.offsetWidth)}x${Math.max(e.scrollHeight,e.offsetHeight,a.clientHeight,a.scrollHeight,a.offsetHeight)}`}function D(){if(!(0,c.Jw)()&&!(0,c.av)())return"";const t={w:0,h:0};if((0,c.Jw)()){const{win:e}=(0,c.xV)()||{};if(!e)return"";t.w=Math.round(e.w),t.h=Math.round(e.h)}else{const{innerWidth:e,innerHeight:a}=(0,c.Ot)();t.w=e,t.h=a}return`${t.w}x${t.h}`}(0,d.bz)("realTimeData",T),(0,n.E)("adagioRtdProvider")}},t=>{t.O(0,[5,759,316,802,769,139,85],(()=>{return e=2855,t(t.s=e);var e}));t.O()}]);